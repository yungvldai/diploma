\section{РАЗРАБОТКА СТРУКТУРНОЙ СХЕМЫ СИСТЕМЫ УПРАВЛЕНИЯ. ОПРЕДЕЛЕНИЕ ПАРАМЕТРОВ}

\subsection{Синхронная машина}

Был рассмотрен двухфазный двигатель серии ДБМ. Получена система 
уравнений для этого двигателя. Для упрощения модели не учитываются:
\begin{itemize}
  \item Влияние реакции якоря;
  \item Потоки рассеяния и насыщения магнитной цепи;
  \item Потери в стали;
  \item Пульсации момента.
\end{itemize}
Считается, что магнитные потоки и МДС статора и ротора синусоидально
распределены, а еще одно допущение заключается в предположении о том, что
электромеханические процессы протекают гораздо медленнее, чем вызывающие их 
электромагнитные процессы \cite{БеленькийМикеровМоментныйПривод}. 

Также, ротор двигателя лишен смещения центра тяжести.

С помощью второго закона Кирхгофа были получены уравнения токов в обмотках
статора

\begin{equation}
  \begin{cases}
    L_{\text{ф}}\frac{di_A}{dt}+Ri_A=u_A+e_A;
    \\
    L_{\text{ф}}\frac{di_B}{dt}+Ri_B=u_B+e_B,
  \end{cases}
  \label{eq:toki}
\end{equation}

где $L_{\text{ф}}$ - индуктивность фазы, $R$ - сопротивление фазы, 
$e_A$, $e_B$ - ЭДС, наводимые в фазах $A$ и $B$ соответственно.

Согласно \cite{БеленькийМикеровМоментныйПривод}, система уравнений 
\ref{eq:toki} c 
использованием преобразования Парка преобразуется в вид

\begin{equation}
  \begin{cases}
    T_{\text{ф}}\frac{di_A}{dt}+i_A=\frac{1}{R}(u_A+C_e\omega sin(\theta));
    \\
    T_{\text{ф}}\frac{di_B}{dt}+i_B=\frac{1}{R}(u_B-C_e\omega cos(\theta)),
  \end{cases}
  \label{eq:toki2}
\end{equation}

где $T_{\text{ф}}$ - электромагнитная постоянная времени, $\theta$ - угол
поворота ротора двигателя, а $\omega=\frac{d\theta}{dt}$ - его угловая скорость.

Вращающий момент многополюсной машины с числом пар полюсов $p$ равен
\begin{equation}
  M=pwФ_zi_q,
  \label{eq:mom}
\end{equation}

где $Ф_z$ - поток ротора, $w$ - число витков в обмотке, пересекаемой 
потоком $Ф_z$, $i_q$ - проекция вектора тока статора на 
ось $q$ \cite{БеленькийМикеровМоментныйПривод}.

Следует отметить, что произведение $pwФ_z$ представляет из себя константу $C_e$ - 
коэффициент ЭДС, приведенный к фазе.

С помощью обратного преобразования Парка преобразуем равенство \ref{eq:mom} в
следующий вид

\begin{equation}
  M=C_m(i_Bcos(\theta)-i_Asin(\theta)).
  \label{eq:mom2}
\end{equation}

Введем зависимость момента от углового ускорения

\begin{equation}
  J\epsilon=M - M_{\text{вн}},
  \label{eq:acc}
\end{equation}

где $J$ - момент инерции ротора, $M_{\text{вн}}$ - внешний момент нагрузки, $\epsilon=\frac{d\omega}{dt}$~- угловое ускорение ротора.

Таким образом, из уравнений \ref{eq:toki2}, \ref{eq:mom2} и \ref{eq:acc} 
была получена система уравнений двигателя 

\begin{equation}
  \begin{cases}
    T_{\text{ф}}\frac{di_A}{dt}+i_A=\frac{1}{R}(u_A+C_e\omega sin(\theta));
    \\
    T_{\text{ф}}\frac{di_B}{dt}+i_B=\frac{1}{R}(u_B-C_e\omega cos(\theta));
    \\
    M=C_m(i_Bcos(\theta)-i_Asin(\theta));
    \\
    J(\epsilon)=M - M_{\text{вн}}.
  \end{cases}
  \label{eq:sys}
\end{equation}

$T_{\text{ф}}, R, C_e, C_m$ - константы, значения которых представлены в таблице на 
веб-сайте производителя \cite{ДБМ63}.

Ее структурная схема, созданная с помощью программного пакета
MATLAB Simulink представлена в приложении А. %todo
Из довольно объемной схемы был создан пользовательский блок Motor (рисунок \ref{motor_block}).

\insertimage[scale=0.55]{motor_block}{
  Блок, представляющий модель двигателя ДБМ
}

У блока 3 входа: $uA$, $uB$ - фазные напряжения, $Mext$ - внешний момент; 
и 2 выхода: $M$ - создаваемый момент, $eps$ - угловое ускорение.

Однако, этого не достаточно для полноценной работы двигателя - необходим генератор фазных напряжений.
Для этого была разработана следующая подсистема - коммутатор.

\subsection{Коммутатор}

Задача коммутатора (рисунок \ref{comm}) заключается в том, чтобы подавать напряжение на нужные обмотки в нужный момент.
Этот самый <<нужный момент>> определяется исходя из угла положения ротора $\theta$. Грубо говоря,
реализуется коллектор ДПТ, точнее его электронный вариант.

В реальной системе нет возможности менять полярность напряжения на обмотке. Как было отмечено ранее,
используется специальная схема подключения обмоток. При работе с MATLAB Simulink такая возможность имеется и
используется для упрощения модели.

\insertimage[scale=1]{comm}{
  Структурная схема коммутатора
}

В зависимости от угла $\theta$ изменяются значения выходов $A$ и $B$, а с помощью входа $u$ задается амплитуда
выходных сигналов.

\insertimage[scale=1]{shim}{
  Структурная схема широтно-импульсного модулятора
}

\clearpage

\subsection{ШИМ}

В системе для задания амплитуд фазных напряжений используется широтно-импульсная модуляция, 
поэтому для этого тоже был собран специальный модуль.
В основе блока (рисунок \ref{shim}) лежит генератор пилообразных сигналов с частотой 1 килогерц. 
Принцип работы блока заключается в сравнении входного сигнала $in$ с референсным сигналом
$ref$ и переключении полярности выхода $out$ в зависимости от результата сравнения. Опять же, стоит отметить, что
благодаря средствам MATLAB Simulink реализация ШИМ является двухполюсной, то есть выходной сигнал принимает
значения в диапазоне $[-ref; ref]$, а не $[0, ref]$ как обычно делается в электронике.

\subsection{Двигатель}

После создания всех необходимые блоков была построена структурная схема двигателя (рисунок \ref{ou}).

\insertimage[scale=0.55]{ou}{
  Структурная схема двигателя
}

Затем, система была промоделирована без какой-либо нагрузки при номинальном входном 
напряжении $27$ вольт и средних значениях $R$, $Ce$ и $Cm$. На графике (рисунок \ref{omega_chart1}) 
представлена зависимость угловой скорости $\omega$ от времени. Установившееся значение скорости~- $~318$~рад/сек. Заявленная
производителем частота вращения при идеальном холостом ходе~- $2700-3400$~об/мин или $282-386$~рад/сек. Это 
не достаточное, но необходимое условие для того, чтобы говорить о корректности построенной модели.

\insertimage[scale=0.35]{omega_chart1}{
  Зависимость угловой скорости $\omega$ от времени
}